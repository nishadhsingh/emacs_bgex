;
;
;
(defun bgex-set-xpm-string (identifier type xpm-string &optional dynamic-color-p)
  "ウィンドウごとの背景画像を指定します。
identifier はウィンドウを識別するための文字列で、メジャーモードやバッファ名を指定します。
type には
    'bgex-identifier-type-major-mode	(identifier をメジャーモード名として扱う)
    'bgex-identifier-type-buffer-name	(identifier をバッファ名として扱う)
が指定できます。
string には XPM イメージを指定します。
dynamic-color-p が Non-nil ならば動的色生成モードで起動します。"
  (interactive)

  (if (string= window-system "x")
      (progn
	(let ((getid (bgex-bgexid-check identifier type)))
	  (if getid
	      (progn
		(let ((color (bgexi-get-color getid)))
		  (bgexi-restart-for-xpm-string getid t dynamic-color-p color xpm-string))
		(redraw-display)
		getid)
	    (let ((id (bgexid-create identifier type)))
	      (if id
		  (if (bgexi-create-for-xpm-string id t dynamic-color-p "white" xpm-string)
		      (message "bgexi-create failed.")
		    (redraw-display)
		    id)
		(error "Internal error."))))))
    (message "Emacs is not running under a X window system.")))

;
;
;
(bgex-set-xpm-string "*scratch*" 'bgex-identifier-type-buffer-name (concat
"/* XPM */\n"
"static char *test[] = {\n"
"/* columns rows colors chars-per-pixel */\n"
"\"32 32 249 2 \",\n"
"\"   c #000E1D\",\n"
"\".  c #07192A\",\n"
"\"X  c #011B39\",\n"
"\"o  c #0E102F\",\n"
"\"O  c #142537\",\n"
"\"+  c #740705\",\n"
"\"@  c #5F3317\",\n"
"\"#  c #70321F\",\n"
"\"$  c #502E2E\",\n"
"\"%  c #703A32\",\n"
"\"&  c #5F4234\",\n"
"\"*  c #6B4E3C\",\n"
"\"=  c #032743\",\n"
"\"-  c #0B3455\",\n"
"\";  c #393E57\",\n"
"\":  c #2C3449\",\n"
"\">  c #023A62\",\n"
"\",  c #003C73\",\n"
"\"<  c #364750\",\n"
"\"1  c #164364\",\n"
"\"2  c #03416C\",\n"
"\"3  c #2C4B66\",\n"
"\"4  c #5B4E53\",\n"
"\"5  c #7F544A\",\n"
"\"6  c #796755\",\n"
"\"7  c #555567\",\n"
"\"8  c #404B6D\",\n"
"\"9  c #596E7D\",\n"
"\"0  c #716F79\",\n"
"\"q  c #871C10\",\n"
"\"w  c #8E1A09\",\n"
"\"e  c #922512\",\n"
"\"r  c #972A19\",\n"
"\"t  c #8F2611\",\n"
"\"y  c #A72F18\",\n"
"\"u  c #943927\",\n"
"\"i  c #B63729\",\n"
"\"p  c #AB3E30\",\n"
"\"a  c #CB3C32\",\n"
"\"s  c #975F28\",\n"
"\"d  c #9B4737\",\n"
"\"f  c #874D33\",\n"
"\"g  c #AB553C\",\n"
"\"h  c #B74B31\",\n"
"\"j  c #B0713A\",\n"
"\"k  c #95531C\",\n"
"\"l  c #C14114\",\n"
"\"z  c #CA463A\",\n"
"\"x  c #D8433D\",\n"
"\"c  c #CA5631\",\n"
"\"v  c #D67727\",\n"
"\"b  c #C46D33\",\n"
"\"n  c #CE702F\",\n"
"\"m  c #E57527\",\n"
"\"M  c #E97130\",\n"
"\"N  c #9A5143\",\n"
"\"B  c #935B4B\",\n"
"\"V  c #857B4D\",\n"
"\"C  c #926C5A\",\n"
"\"Z  c #BC6844\",\n"
"\"A  c #B17153\",\n"
"\"S  c #B37767\",\n"
"\"D  c #997069\",\n"
"\"F  c #DC4B41\",\n"
"\"G  c #CD6B5D\",\n"
"\"H  c #CC7B53\",\n"
"\"J  c #DC7156\",\n"
"\"K  c #CF664C\",\n"
"\"L  c #CF7B66\",\n"
"\"P  c #7E8468\",\n"
"\"I  c #D9852B\",\n"
"\"U  c #DC8933\",\n"
"\"Y  c #DC9836\",\n"
"\"T  c #CE832C\",\n"
"\"R  c #E48E30\",\n"
"\"E  c #E79633\",\n"
"\"W  c #F49B37\",\n"
"\"Q  c #FD8539\",\n"
"\"!  c #DDA031\",\n"
"\"~  c #E9A738\",\n"
"\"^  c #F5AC38\",\n"
"\"/  c #E9B53C\",\n"
"\"(  c #F4B439\",\n"
"\")  c #F4BC3C\",\n"
"\"_  c #FABC3A\",\n"
"\"`  c #F6B835\",\n"
"\"'  c #EFAF2E\",\n"
"\"]  c #EAC23B\",\n"
"\"[  c #FBC33B\",\n"
"\"{  c #FDCB3B\",\n"
"\"}  c #F6C53A\",\n"
"\"|  c #B28F50\",\n"
"\" . c #BFA041\",\n"
"\".. c #8A9775\",\n"
"\"X. c #AF8C6F\",\n"
"\"o. c #BDAE68\",\n"
"\"O. c #C79146\",\n"
"\"+. c #D79D42\",\n"
"\"@. c #D38A4F\",\n"
"\"#. c #EA9249\",\n"
"\"$. c #D8AC50\",\n"
"\"%. c #E7A744\",\n"
"\"&. c #F3AC48\",\n"
"\"*. c #E8B845\",\n"
"\"=. c #F4BA44\",\n"
"\"-. c #E7BA55\",\n"
"\";. c #EFAD57\",\n"
"\":. c #C68976\",\n"
"\">. c #D0916C\",\n"
"\",. c #EB8C6A\",\n"
"\"<. c #D9AB67\",\n"
"\"1. c #D5B468\",\n"
"\"2. c #D3AF78\",\n"
"\"3. c #EAB662\",\n"
"\"4. c #E3BC73\",\n"
"\"5. c #E3B374\",\n"
"\"6. c #F0AC7A\",\n"
"\"7. c #BBC36A\",\n"
"\"8. c #D8C85B\",\n"
"\"9. c #DDD14E\",\n"
"\"0. c #E4C943\",\n"
"\"q. c #FAC643\",\n"
"\"w. c #FDCD42\",\n"
"\"e. c #FACC4B\",\n"
"\"r. c #F6C647\",\n"
"\"t. c #FDD243\",\n"
"\"y. c #F9D24C\",\n"
"\"u. c #EAC856\",\n"
"\"i. c #F4CD55\",\n"
"\"p. c #FAD456\",\n"
"\"a. c #EFD249\",\n"
"\"s. c #D2D864\",\n"
"\"d. c #E7C46C\",\n"
"\"f. c #F5C663\",\n"
"\"g. c #FDE267\",\n"
"\"h. c #CBE76C\",\n"
"\"j. c #044E85\",\n"
"\"k. c #035289\",\n"
"\"l. c #055B93\",\n"
"\"z. c #256793\",\n"
"\"x. c #7B7B86\",\n"
"\"c. c #776A8B\",\n"
"\"v. c #577499\",\n"
"\"b. c #64848D\",\n"
"\"n. c #56A190\",\n"
"\"m. c #5094B4\",\n"
"\"M. c #51858D\",\n"
"\"N. c #3A95DD\",\n"
"\"B. c #3FA0DE\",\n"
"\"V. c #178CD2\",\n"
"\"C. c #54ACCE\",\n"
"\"Z. c #72B0CB\",\n"
"\"A. c #7A95CF\",\n"
"\"S. c #7BD0E1\",\n"
"\"D. c #6DC8C9\",\n"
"\"F. c #8E9195\",\n"
"\"G. c #A89887\",\n"
"\"H. c #AE928E\",\n"
"\"J. c #99BD99\",\n"
"\"K. c #B8A994\",\n"
"\"L. c #8E9BA7\",\n"
"\"P. c #8DA6AC\",\n"
"\"I. c #92BAAD\",\n"
"\"U. c #B3ACAD\",\n"
"\"Y. c #D69C8C\",\n"
"\"T. c #CC9C92\",\n"
"\"R. c #E99984\",\n"
"\"E. c #CEAD8B\",\n"
"\"W. c #C8AA96\",\n"
"\"Q. c #D3AF92\",\n"
"\"!. c #E7A986\",\n"
"\"~. c #FAAD8A\",\n"
"\"^. c #FAAE92\",\n"
"\"/. c #D9B4A8\",\n"
"\"(. c #C4AEB1\",\n"
"\"). c #E4B9A9\",\n"
"\"_. c #EFB9AA\",\n"
"\"`. c #A5CA97\",\n"
"\"'. c #BDE196\",\n"
"\"]. c #A5D6A3\",\n"
"\"[. c #C7CF99\",\n"
"\"{. c #ECD196\",\n"
"\"}. c #E8CC89\",\n"
"\"|. c #D6E182\",\n"
"\" X c #FCEA9A\",\n"
"\".X c #C9C8A6\",\n"
"\"XX c #D3C6AC\",\n"
"\"oX c #D0C7B8\",\n"
"\"OX c #E4C6A5\",\n"
"\"+X c #FFCAAB\",\n"
"\"@X c #E2D7AA\",\n"
"\"#X c #EDC2B3\",\n"
"\"$X c #FECAB3\",\n"
"\"%X c #F9D9BD\",\n"
"\"&X c #E5D3B4\",\n"
"\"*X c #FAEBBA\",\n"
"\"=X c #B9BCC5\",\n"
"\"-X c #AEBAC0\",\n"
"\";X c #C39BCD\",\n"
"\":X c #C6B2CA\",\n"
"\">X c #DDBEE8\",\n"
"\",X c #93D3D0\",\n"
"\"<X c #ADC1C5\",\n"
"\"1X c #B9DADF\",\n"
"\"2X c #B7C1CD\",\n"
"\"3X c #B8EEE1\",\n"
"\"4X c #B6EDC7\",\n"
"\"5X c #C6CDCE\",\n"
"\"6X c #C4D6DA\",\n"
"\"7X c #D7D7D8\",\n"
"\"8X c #D2CDCE\",\n"
"\"9X c #E2CCC6\",\n"
"\"0X c #E9D9C8\",\n"
"\"qX c #FEDECB\",\n"
"\"wX c #F8D6C7\",\n"
"\"eX c #E7DBD6\",\n"
"\"rX c #F6D6CC\",\n"
"\"tX c #DDE0DD\",\n"
"\"yX c #EBE8DA\",\n"
"\"uX c #FDE5DA\",\n"
"\"iX c #FFE9DD\",\n"
"\"pX c #F4E5D9\",\n"
"\"aX c #E9E4CB\",\n"
"\"sX c #CAD6E4\",\n"
"\"dX c #EDD6F4\",\n"
"\"fX c #F9D7FC\",\n"
"\"gX c #E4C9EB\",\n"
"\"hX c #CAE6E9\",\n"
"\"jX c #D9EDFA\",\n"
"\"kX c #D6F0ED\",\n"
"\"lX c #EBE9E5\",\n"
"\"zX c #ECECEC\",\n"
"\"xX c #E8E6E8\",\n"
"\"cX c #F3ECE2\",\n"
"\"vX c #FEEDE3\",\n"
"\"bX c #F1EBE9\",\n"
"\"nX c #FFF1E6\",\n"
"\"mX c #FEF5EC\",\n"
"\"MX c #F5F4EA\",\n"
"\"NX c #EBE9F2\",\n"
"\"BX c #F2EDF1\",\n"
"\"VX c #EEF3F3\",\n"
"\"CX c #EBF6FD\",\n"
"\"ZX c #F3F3F3\",\n"
"\"AX c #FDFAF4\",\n"
"\"SX c #F3F6FA\",\n"
"\"DX c #F6FAFF\",\n"
"\"FX c #FEFEFE\",\n"
"\"GX c #FBF8F7\",\n"
"/* pixels */\n"
"\"FXFXDXkXCXFXFXFXFXFXFXFXVXBXBXNXBXxXBXGXFXFXFXFXFXFXFXFXFXFXFXFX\",\n"
"\"FXFXDX,X,XzXVXZXGXFXGX:X>XdX7X:XNXBXNXsXsX2XVXFXFXFXFXFXFXFXFXFX\",\n"
"\"FXFX7XJ.'.[.aXDXVXFX=X;XfXdXdXGXFXFXSXjX,XM.xXFXFXFXFXFXFXFXFXFX\",\n"
"\"GXVXyX1.|.8.*.<./.>.3 c.;XgXdXBXdX7X=XL.b.P.FXFXFXFXFXFXFXFXFXFX\",\n"
"\"zXFXyXY u.r.~ v m m 4 = : 7 0 x.x.x.x.9 < 2XFXAXFXFXFXFXFXFXFXFX\",\n"
"\"zXFXyXn u.~ Y ~ &.W R V - X X o ....: .   K.*XpXVXGXFXDXFXFXFXFX\",\n"
"\"zXFXFXg I U -.=.;.} ( { E Z B $ k # $ 4 D W ' 0.s.'.4X3XhXFXFXFX\",\n"
"\"GXSXFXg b ;.t.-.r.i.( r.r.w.e.W m M M Q R I ` [ a.h.`.n.D.FXFXFX\",\n"
"\"FXFXFX2.<.-.` =.e.u.e.q.e.%.} { ) } _ _ } T ! ] r.Y A ..kXFXFXFX\",\n"
"\"FXFXcX#.M / _ _ ~ ~ e.=._ E ) [ [ ( _ _ [ E I ' T c j [.FXFXFXFX\",\n"
"\"FXFX5.,.+.[ } } E R ^ _ ^ E E 0.( ) ^ [ ` E n b y l U SXFXFXFXFX\",\n"
"\"FXiX@.0X%.[ } { R n ^ [ W W b #./ / / { r.( l + w h yXFXFXFXFXFX\",\n"
"\"FX).!.MX/ } { { #.,.U =.( U H C * s 8.p.i.&.r + q 9XFXFXFXFXFXFX\",\n"
"\"FXE.aXZX*.` ] / G W.O.$.8.| 6 3 v.v.5.e.y.E r t oXFXFXFXFXFXFXFX\",\n"
"\"FXXXpXDX4.( u.| O 8 F.X.`.J.-XC.V.=X6.' e.E v 4.DXFXFXFXFXFXFXFX\",\n"
"\"FX7XcXDX&X~ 0.2.A.N.C.eX(.<XuXZ.C.+X5.~ t.E ~ {.jXVXFXFXFXFXFXFX\",\n"
"\"FXZXtXSXyXd.9.2.9XC.S.qXuXvXwX^.,.~.3.~ e.R v ;X6XtXFXFXFXFXFXFX\",\n"
"\"FXFXGXVX@X$.o...!.~.~.qXAXAXmXqX$XwX1.&.e.U H.c.-XhXSXFXFXFXFXFX\",\n"
"\"FXFXDX@X8.| P m.H.+X%XvXeX)._.cXZXW.2.f.i.b @.+.oX4XxXtXzXFXFXFX\",\n"
"\"FXSXyXu. .G.F.Z.m.W.nXAXpX_._.mX/.D X.1.$.@.#.{ *./ p.aX7XlXFXFX\",\n"
"\"GXlXd.] $.VX5XhX=XL G T.U.7XyXW.W.F.0 | A oX-.;.g.@Xu.t.{.XXcXFX\",\n"
"\"DXOX] { 5.DXDXBX/.,.J Z @ u K L mXqX_..X@XtX).;.y.{.CX}.[ 0.0XFX\",\n"
"\"FX5.} t.<.9X| j A 4. X>.r g J _.vXuXuXuXuXeXyX6.( d.DXVXd.! XXDX\",\n"
"\"DXQ.! u.8.S k s s Z K z r 5 >.wXuXuXuXvXwXpXZX0XE }.FXSXMXO.E.DX\",\n"
"\"zXZX>.| '.G.N q r a a x r % X.E.0XnXnXY.L uXVX/. .0XFXVXbXW..XDX\",\n"
"\"VXVXxXK.L.(.wXS e a F F r % :.N E.)._.z R.vXbXI.<XGXVXlXAX<X5XFX\",\n"
"\"FXBXGXFXVX/.).:.r i F a p S f B X.# ; 7 ,.uXrX1XAXGXGXFXVX6XFXFX\",\n"
"\"FXFXGXGXDX/._.S q i F i T.rXD C @ % z.k.4 R.wXcXFXFXFXDXVXFXFXFX\",\n"
"\"FXFXFXFXFX/.A d e i a G cXvXnXY.u v.z.k.> O C /.FXFXFXFXFXFXFXFX\",\n"
"\"FXFXFXFXFX9X:.u q i z 0XmXvXmX^.7 l.j.l.- = , 9 FXFXFXFXFXFXFXFX\",\n"
"\"FXFXFXFXFXeXd u r y Y.AXvXAX_.% > j.j., O . k.1 lXFXFXFXFXFXFXFX\",\n"
"\"FXFXFXFXFXNXe e q A AXvXmXwXN   . = = .   O 1 > 8XFXFXFXFXFXFXFX\"\n"
"};\n"
) t)
